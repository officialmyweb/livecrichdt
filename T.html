<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JWPlayer MPD Stream</title>
  <script src="https://cdn.jwplayer.com/libraries/your_jwplayer_key.js"></script>
  <script>
    // Function to extract the token from the MPD URL
    function extractTokenFromLink(url) {
      const urlParams = new URLSearchParams(url.split('?')[1]);
      return urlParams.get('__hdnea__');
    }

    // Set cookie function to store the extracted token
    function setCookie(name, value) {
      document.cookie = `${name}=${value}; path=/;`;
    }

    // Intercept network requests using the token
    function interceptNetworkRequests(token) {
      // Here you can add any logic to intercept or modify network requests
      console.log('Intercepting network requests with token:', token);
    }

    // Replace obfuscated characters in the string
    var _0x31c867 = new RegExp("[SIRzxzAeWUjrCDUmIBOFMydJEmrw]", 'g');
    var _0x36d26d = "aSbout:IRbzlxazAenWUjkrCDUmIBOFMydJEmrw".replace(_0x31c867, '');
    
    // Extract token from the MPD URL
    var tokenValue = extractTokenFromLink("https://jiotvmblive.cdn.jio.com/bpk-tv/Six_HD_BTS/output/index.mpd?__hdnea__=st=1731096180~exp=1731182580~acl=/*~hmac=967ac6d648657fc828d0c44a8677ed015a132a45193f7edff8f79b2287731b40");

    if (tokenValue) {
      // Set token in a cookie
      setCookie('__hdnea__', tokenValue);
      // Intercept network requests with the token
      interceptNetworkRequests(tokenValue);
    }

    // Setup JWPlayer to play the MPD stream with DRM
    function setupJWPlayer() {
      var playerInstance = jwplayer("player");
      playerInstance.setup({
        playlist: [{
          file: "https://jiotvmblive.cdn.jio.com/bpk-tv/Six_HD_BTS/output/index.mpd?__hdnea__=st=1731096180~exp=1731182580~acl=/*~hmac=967ac6d648657fc828d0c44a8677ed015a132a45193f7edff8f79b2287731b40",
          type: "dash"
        }],
        width: "100%",
        aspectratio: "16:9",
        autostart: true,
        cast: {
          appid: 'CC1AD845'
        },
        drm: {
          clearkey: {
            keyId: "523acf1f55485476817958a62a3f2ed9",
            key: "52b3cea435ed25d445f9eae4883c7001"
          }
        }
      });
    }

    // Initialize JWPlayer setup once the page is loaded
    window.onload = function () {
      setupJWPlayer();
    };
  </script>
</head>
<body>
  <h1>JWPlayer Stream with MPD and DRM</h1>
  <div id="player"></div>
</body>
</html>
